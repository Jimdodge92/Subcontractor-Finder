<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Subcontractor Finder</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter font from Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <!-- React and ReactDOM CDNs -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel for JSX transformation in the browser (for development/simple files) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
        // Helper function to calculate distance between two lat/lon points using Haversine formula
        // This is an approximation for demonstration purposes.
        const haversineDistance = (lat1, lon1, lat2, lon2) => {
            const toRad = (value) => (value * Math.PI) / 180;
            const R = 6371; // Earth's radius in kilometers

            const dLat = toRad(lat2 - lat1);
            const dLon = toRad(lon2 - lon1);
            const a =
                Math.sin(dLat / 2) * Math.sin(dLat / 2) +
                Math.cos(toRad(lat1)) * Math.cos(toRad(lat2)) *
                Math.sin(dLon / 2) * Math.sin(dLon / 2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
            return R * c * 0.621371; // Convert kilometers to miles
        };

        // Main App component
        const App = () => {
            const [address, setAddress] = React.useState('');
            const [vendorType, setVendorType] = React.useState('IP Camera');
            const [radius, setRadius] = React.useState('10'); // Changed default radius to 10 miles
            const [searchResults, setSearchResults] = React.useState([]);
            const [loading, setLoading] = React.useState(false);
            const [message, setMessage] = React.useState('');

            // Approximate central coordinates for Las Vegas, NV for distance calculation
            const LAS_VEGAS_CENTER = { lat: 36.1699, lon: -115.1398 };

            // Hardcoded list of local subcontractors with their services and approximate coordinates.
            // Note: For 'CCTV' and 'Access Control', these vendors are assumed to be local-only.
            // For 'Electrician' and 'Roofer', national presence is allowed, though current examples are local.
            const localSubcontractors = [
                // CCTV & Access Control Vendors (local-only) - now at least 5 each
                {
                    name: 'PROTECHT',
                    website: 'https://protechtlv.com/',
                    phone: '(725) 205-4159', // Example phone
                    description: 'Locally owned and operated, 20 years of industry experience in commercial technology integration, structured cabling, access control, security systems, and surveillance cameras.',
                    address: '11500 S Eastern Ave #150 Henderson, NV 89052',
                    services: ['IP Camera', 'Access Control', 'Security Systems', 'Cabling'],
                    coords: { lat: 36.0000, lon: -115.0800 }, // Approx. Henderson
                    rating: 4.8,
                    reviews: 250
                },
                {
                    name: 'Universal Fiber Optics LLC',
                    website: 'https://ufocable.com/',
                    phone: '(725) 356-3060',
                    description: 'Specializes in network cabling services, including fiber optics and expert security camera installation. Experienced team with a local presence.',
                    address: '3773 Howard Hughes Pkwy Ste 500S, Las Vegas, NV 89169',
                    services: ['IP Camera', 'Cabling', 'Security Systems'],
                    coords: { lat: 36.1180, lon: -115.1400 }, // Approx. Central Las Vegas
                    rating: 4.5,
                    reviews: 180
                },
                {
                    name: 'K&B Communications',
                    website: 'https://kandbcom.com/',
                    phone: '(702) 952-2711',
                    description: 'Premier telecommunications company specializing in video surveillance, data cabling, and fiber optic installations. Local to Las Vegas and Henderson, licensed and insured.',
                    address: '50 S Jones Blvd Ste 203, Las Vegas, NV 89107',
                    services: ['IP Camera', 'Cabling', 'Security Systems'],
                    coords: { lat: 36.1600, lon: -115.2200 }, // Approx. West Las Vegas
                    rating: 4.7,
                    reviews: 310
                },
                {
                    name: 'DEMCO, LLC',
                    website: 'https://demcolv.com/',
                    phone: '(702) 202-4368', // Example phone
                    description: 'Locally owned and operated, offering voice, data, fiber optic, CCTV, and A/V cabling solutions. Servicing Southern Nevada for over 10 years.',
                    address: '6440 Sky Pointe Dr Ste 140-144, Las Vegas, NV 89131',
                    services: ['IP Camera', 'Cabling', 'CCTV'],
                    coords: { lat: 36.2900, lon: -115.2600 }, // Approx. NW Las Vegas
                    rating: 4.6,
                    reviews: 150
                },
                {
                    name: 'Southwest Modular',
                    website: 'https://www.swmodularinc.com/',
                    phone: '(702) 248-9888',
                    description: 'Specializes in low-voltage wiring installation for businesses, including security & alarm systems, and CCTV. Local Las Vegas contractor.',
                    address: '639 E Brooks Ave, Las Vegas, NV',
                    services: ['IP Camera', 'Security Systems', 'CCTV', 'Cabling'],
                    coords: { lat: 36.0500, lon: -115.2500 }, // Approx. SW Las Vegas
                    rating: 4.4,
                    reviews: 90
                },
                {
                    name: 'Vegas Security Solutions',
                    website: 'https://www.vegassecuritysolutions.com/',
                    phone: '(702) 555-0101',
                    description: 'Comprehensive security system installations including CCTV and access control for commercial properties.',
                    address: '987 E Flamingo Rd, Las Vegas, NV 89119',
                    services: ['IP Camera', 'Access Control', 'Security Systems'],
                    coords: { lat: 36.1100, lon: -115.1100 }, // Approx. East Las Vegas
                    rating: 4.9,
                    reviews: 400
                },
                {
                    name: 'Desert Access Control',
                    website: 'https://www.desertaccesscontrol.com/',
                    phone: '(702) 555-0202',
                    description: 'Specializing in robust access control systems, gate automation, and commercial security solutions.',
                    address: '1234 W Warm Springs Rd, Henderson, NV 89014',
                    services: ['Access Control', 'Security Systems'],
                    coords: { lat: 35.9900, lon: -115.0500 }, // Approx. Henderson
                    rating: 4.7,
                    reviews: 210
                },
                {
                    name: 'Nevada Surveillance Pros',
                    website: 'https://www.nevadasurveillancepros.com/',
                    phone: '(702) 555-0303',
                    description: 'Expert installation and maintenance of surveillance cameras (CCTV) for businesses and residential complexes.',
                    address: '5678 S Decatur Blvd, Las Vegas, NV 89118',
                    services: ['IP Camera', 'CCTV'],
                    coords: { lat: 36.0500, lon: -115.2000 }, // Approx. South Las Vegas
                    rating: 4.6,
                    reviews: 175
                },
                {
                    name: 'Secure Entry Systems LV',
                    website: 'https://www.secureentrylv.com/',
                    phone: '(702) 555-0404',
                    description: 'Providing advanced access control, intercom, and video entry systems for secure environments.',
                    address: '2468 N Nellis Blvd, Las Vegas, NV 89115',
                    services: ['Access Control'],
                    coords: { lat: 36.2000, lon: -115.0400 }, // Approx. Northeast Las Vegas
                    rating: 4.5,
                    reviews: 120
                },
                {
                    name: 'Apex CCTV & Alarms',
                    website: 'https://www.apexcctv.com/',
                    phone: '(702) 555-0505',
                    description: 'Integrated CCTV and alarm systems for comprehensive property protection.',
                    address: '1357 W Sunset Rd, Henderson, NV 89014',
                    services: ['IP Camera', 'CCTV', 'Security Systems'],
                    coords: { lat: 36.0000, lon: -115.0900 }, // Approx. Henderson
                    rating: 4.8,
                    reviews: 300
                },

                // Electricians (national presence allowed, current examples local) - now at least 5
                {
                    name: 'Las Vegas Electric Solutions',
                    website: 'https://www.lvelectricsolutions.com/',
                    phone: '(702) 555-1234',
                    description: 'Experienced local electricians for commercial and residential electrical services, including new installations, repairs, and upgrades.',
                    address: '123 Main St, Las Vegas, NV',
                    services: ['Electrician'],
                    coords: { lat: 36.1750, lon: -115.1450 }, // Approx. near center
                    rating: 4.7,
                    reviews: 200
                },
                {
                    name: 'Vegas Spark Electric',
                    website: 'https://www.vegasparkelectric.com/',
                    phone: '(702) 555-9876',
                    description: 'Full-service electrical contractor serving the greater Las Vegas area. Specializing in commercial and industrial projects.',
                    address: '789 Elm St, North Las Vegas, NV',
                    services: ['Electrician'],
                    coords: { lat: 36.2500, lon: -115.1000 }, // Approx. North Las Vegas
                    rating: 4.6,
                    reviews: 180
                },
                {
                    name: 'Bright Light Electrical',
                    website: 'https://www.brightlightelectric.com/',
                    phone: '(702) 555-3333',
                    description: 'Residential and commercial electrical services, emergency repairs, and lighting installation in Las Vegas.',
                    address: '222 Desert Dr, Las Vegas, NV',
                    services: ['Electrician'],
                    coords: { lat: 36.1000, lon: -115.2000 }, // Approx. West Las Vegas
                    rating: 4.8,
                    reviews: 250
                },
                {
                    name: 'Reliable Circuits LLC',
                    website: 'https://www.reliablecircuits.com/',
                    phone: '(702) 555-7777',
                    description: 'Specializing in electrical panel upgrades, wiring, and code compliance for businesses in the Las Vegas valley.',
                    address: '333 Cactus Rd, North Las Vegas, NV',
                    services: ['Electrician'],
                    coords: { lat: 36.2800, lon: -115.1200 }, // Approx. Far North Las Vegas
                    rating: 4.5,
                    reviews: 130
                },
                {
                    name: 'Power Up Electric LV',
                    website: 'https://www.poweruplv.com/',
                    phone: '(702) 555-6666',
                    description: 'Licensed and insured electricians providing reliable service for homes and businesses in Henderson and Las Vegas.',
                    address: '444 Boulder Hwy, Henderson, NV',
                    services: ['Electrician'],
                    coords: { lat: 36.0300, lon: -115.0000 }, // Approx. East Henderson
                    rating: 4.7,
                    reviews: 210
                },
                {
                    name: 'Desert Current Electric',
                    website: 'https://www.desertcurrentelectric.com/',
                    phone: '(702) 555-8888',
                    description: 'Dedicated to providing safe and efficient electrical solutions for new construction and renovations.',
                    address: '555 Sunset Rd, Las Vegas, NV',
                    services: ['Electrician'],
                    coords: { lat: 36.0700, lon: -115.1800 }, // Approx. South Las Vegas
                    rating: 4.6,
                    reviews: 160
                },

                // Roofers (national presence allowed, current examples local) - now at least 5
                {
                    name: 'Desert Sky Roofing',
                    website: 'https://www.desertskyroofinglv.com/',
                    phone: '(702) 555-5678',
                    description: 'Local roofing experts specializing in commercial and residential roofing, repairs, and new roof installations.',
                    address: '456 Oak Ave, Las Vegas, NV',
                    services: ['Roofer'],
                    coords: { lat: 36.1600, lon: -115.1300 }, // Approx. near center
                    rating: 4.9,
                    reviews: 350
                },
                {
                    name: 'Silver State Roofing',
                    website: 'https://www.silverstateroofing.com/',
                    phone: '(702) 555-4321',
                    description: 'Providing quality roofing solutions for homes and businesses across Southern Nevada for over 15 years.',
                    address: '101 Pine St, Henderson, NV',
                    services: ['Roofer'],
                    coords: { lat: 35.9800, lon: -115.0500 }, // Approx. South Henderson
                    rating: 4.8,
                    reviews: 280
                },
                {
                    name: 'Vegas Valley Roofing',
                    website: 'https://www.vegasvalleyroofing.com/',
                    phone: '(702) 555-9999',
                    description: 'Residential and commercial roofing services, including tile, shingle, and flat roofs.',
                    address: '777 Warm Springs Rd, Las Vegas, NV',
                    services: ['Roofer'],
                    coords: { lat: 36.0200, lon: -115.1000 }, // Approx. South Las Vegas
                    rating: 4.7,
                    reviews: 190
                },
                {
                    name: 'Nevada Roof Pros',
                    website: 'https://www.nevadaroofpros.com/',
                    phone: '(702) 555-1111',
                    description: 'Specializing in roof repair, replacement, and maintenance for all types of properties in the Las Vegas area.',
                    address: '888 Cactus Ave, North Las Vegas, NV',
                    services: ['Roofer'],
                    coords: { lat: 36.2200, lon: -115.1500 }, // Approx. North Las Vegas
                    rating: 4.6,
                    reviews: 140
                },
                {
                    name: 'Guardian Roofing LV',
                    website: 'https://www.guardianroofinglv.com/',
                    phone: '(702) 555-2222',
                    description: 'Reliable and affordable roofing solutions with a focus on customer satisfaction and durable materials.',
                    address: '999 Blue Diamond Rd, Las Vegas, NV',
                    services: ['Roofer'],
                    coords: { lat: 36.0000, lon: -115.3000 }, // Approx. Far SW Las Vegas
                    rating: 4.8,
                    reviews: 270
                },
                {
                    name: 'Summit Roofing Solutions',
                    website: 'https://www.summitroofingsolutions.com/',
                    phone: '(702) 555-4444',
                    description: 'Your trusted partner for commercial and industrial roofing projects, offering expertise in large-scale installations.',
                    address: '111 Corporate Dr, Henderson, NV',
                    services: ['Roofer'],
                    coords: { lat: 36.0500, lon: -115.0300 }, // Approx. East Henderson
                    rating: 4.5,
                    reviews: 160
                }
            ];

            const handleSearch = () => {
                setLoading(true);
                setMessage('');
                setSearchResults([]);

                // In a real application, you would geocode the 'address' input to get its lat/lon.
                // For this demo, we assume the address is in the Las Vegas area and use a central LV coordinate.
                const serviceLocation = LAS_VEGAS_CENTER;
                const selectedRadiusMiles = parseInt(radius, 10);

                setTimeout(() => {
                    if (address.trim() === '') {
                        setMessage('Please enter an address to search.');
                        setLoading(false);
                        return;
                    }

                    // Filter subcontractors based on vendor type and radius
                    const filteredSubcontractors = localSubcontractors.filter(sub => {
                        const isCorrectType = sub.services.includes(vendorType);
                        if (!isCorrectType) return false;

                        // Calculate distance only if coordinates are available
                        if (sub.coords && serviceLocation) {
                            const distance = haversineDistance(
                                serviceLocation.lat,
                                serviceLocation.lon,
                                sub.coords.lat,
                                sub.coords.lon
                            );
                            return distance <= selectedRadiusMiles;
                        }
                        return false; // Exclude if coordinates are missing
                    });

                    setSearchResults(filteredSubcontractors);
                    if (filteredSubcontractors.length > 0) {
                        setMessage(`Displaying potential local subcontractors for ${vendorType} within ${radius} miles of Las Vegas. Please review their details and verify their local presence and capabilities.`);
                    } else {
                        setMessage(`No specific local subcontractors found for ${vendorType} within ${radius} miles of Las Vegas in this demo. Please try a different vendor type, radius, or address.`);
                    }
                    setLoading(false);
                }, 1500); // Simulate network delay
            };

            return (
                <div className="min-h-screen bg-gray-100 flex items-center justify-center p-4 font-sans">
                    <div className="bg-white p-8 rounded-xl shadow-lg w-full max-w-2xl">
                        {/* Logo and Title Section */}
                        <div className="flex items-center justify-center mb-6 relative">
                            {/* Removed the image tag for the logo */}
                            <h1 className="text-3xl font-bold text-center text-gray-800">
                                Subcontractor Finder
                            </h1>
                        </div>

                        <div className="mb-4">
                            <label htmlFor="vendorType" className="block text-gray-700 text-sm font-semibold mb-2">
                                Select Vendor Type:
                            </label>
                            <select
                                id="vendorType"
                                className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200"
                                value={vendorType}
                                onChange={(e) => setVendorType(e.target.value)}
                            >
                                <option value="IP Camera">CCTV</option>
                                <option value="Access Control">Access Control</option>
                                <option value="Electrician">Electrician</option>
                                <option value="Roofer">Roofer</option>
                            </select>
                        </div>

                        <div className="mb-4">
                            <label htmlFor="radius" className="block text-gray-700 text-sm font-semibold mb-2">
                                Select Search Radius (miles):
                            </label>
                            <select
                                id="radius"
                                className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200"
                                value={radius}
                                onChange={(e) => setRadius(e.target.value)}
                            >
                                <option value="10">10 Miles</option>
                                <option value="25">25 Miles</option>
                                <option value="50">50 Miles</option>
                            </select>
                        </div>

                        <div className="mb-6">
                            <label htmlFor="address" className="block text-gray-700 text-sm font-semibold mb-2">
                                Enter Service Address:
                            </label>
                            <input
                                type="text"
                                id="address"
                                className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200"
                                placeholder="e.g., 2060 N RAINBOW ROAD, LAS VEGAS, NV 89108"
                                value={address}
                                onChange={(e) => setAddress(e.target.value)}
                            />
                        </div>

                        <button
                            onClick={handleSearch}
                            className="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition duration-300 ease-in-out font-semibold text-lg shadow-md"
                            disabled={loading}
                        >
                            {loading ? (
                                <div className="flex items-center justify-center">
                                    <svg className="animate-spin h-5 w-5 mr-3 text-white" viewBox="0 0 24 24">
                                        <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
                                        <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                    </svg>
                                    Searching...
                                </div>
                            ) : (
                                'Find Subcontractors'
                            )}
                        </button>

                        {message && (
                            <div className={`mt-6 p-3 rounded-lg text-sm ${searchResults.length > 0 ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'}`}>
                                {message}
                            </div>
                        )}

                        {searchResults.length > 0 && (
                            <div className="mt-8">
                                <h2 className="text-2xl font-bold text-gray-800 mb-4">Potential Local Subcontractors:</h2>
                                <div className="space-y-4">
                                    {searchResults.map((sub, index) => (
                                        <div key={index} className="bg-gray-50 p-5 rounded-lg shadow-sm border border-gray-200">
                                            <h3 className="text-xl font-semibold text-blue-700 mb-2">{sub.name}</h3>
                                            <p className="text-gray-700 text-sm mb-1">
                                                <span className="font-medium">Website:</span>{' '}
                                                <a href={sub.website} target="_blank" rel="noopener noreferrer" className="text-blue-600 hover:underline">
                                                    {sub.website}
                                                </a>
                                            </p>
                                            {sub.phone && (
                                                <p className="text-gray-700 text-sm mb-1">
                                                    <span className="font-medium">Phone:</span>{' '}
                                                    <a href={`tel:${sub.phone.replace(/\D/g, '')}`} className="text-blue-600 hover:underline">
                                                        {sub.phone}
                                                    </a>
                                                </p>
                                            )}
                                            {sub.address && (
                                                <p className="text-gray-700 text-sm mb-1">
                                                    <span className="font-medium">Address:</span> {sub.address}
                                                </p>
                                            )}
                                            {sub.rating && sub.reviews && (
                                                <p className="text-gray-700 text-sm mb-1">
                                                    <span className="font-medium">Rating:</span> {sub.rating} / 5.0 (<span className="font-medium">{sub.reviews}</span> reviews)
                                                </p>
                                            )}
                                            <p className="text-gray-700 text-sm">
                                                <span className="font-medium">Description:</span> {sub.description}
                                            </p>
                                        </div>
                                    ))}
                                </div>
                                <div className="mt-6 p-4 bg-yellow-100 text-yellow-800 rounded-lg text-sm">
                                    <p className="font-semibold mb-2">Important Note:</p>
                                    <ul className="list-disc list-inside space-y-1">
                                        <li>This list is curated based on previous search results and is not exhaustive.</li>
                                        <li>The radius search is based on **approximate** coordinates for Las Vegas and the listed vendors. For precise results, a geocoding service would be required to convert the entered address to exact coordinates.</li>
                                        <li>Always verify the subcontractor's current licensing, insurance, and specific experience with installations.</li>
                                        <li>Confirm they do not have a national presence if that is a strict requirement for your project.</li>
                                        <li>Contact them directly to discuss your service ticket details and obtain quotes.</li>
                                    </ul>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        // Render the App component into the root div
        ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>
</html>